syntax = "proto3";

package Receipt;

import "google/api/annotations.proto";

option go_package = "ArgoNavisV1/Receipt/api/receipt/v1;receiptWrite";


// =========================
// 创建收集表格式接口定义
// =========================
service Receipt {
  rpc CreateStyle(CreateStyleReq) returns (CreateStyleResp) {
    option (google.api.http) = {
      post: "/receipt/write/create/style"
      body: "*"
    };
  }
  rpc CreateReply(CreateReplyReq) returns (CreateReplyResp) {
    option (google.api.http) = {
      post: "/receipt/write/student/reply"
      body: "*"
    };
  }
  rpc ChangeReceiptReply(ChangeReceiptReplyReq) returns (ChangeReceiptReplyResp) {
    option (google.api.http) = {
      post: "/receipt/write/change/reply"
      body: "*"
    };
  }
}

// =========================
// 创建收集表格式请求参数
// =========================
message CreateStyleReq {
  repeated ReceiptStyleColumn receipt_style = 1; // 各行收集表格式汇总
}

message ReceiptStyleColumn {
  string receiptColumnName = 1;           // 单行收集栏标题
  int32 SingleOption = 2;                 // 是否为单选：1=是，0=否，默认1
  repeated string optionList = 3;         // 可选项栏，如["离校", "不离校"] 或 ["upload_file"]
}

// =========================
// 返回参数
// =========================
message CreateStyleResp {
  int32 code = 1;              // 响应码
  string msg = 2;              // 提示信息
  string receipt_style_id = 3; // 创建后的收集表格式ID
}



// ===============================
// 填收集表请求参数定义
// ===============================
message CreateReplyReq {
  int32 notice_id = 1;                                 // 通知 ID
  repeated ReceiptWriteColumn receipt_write = 2;             // 学生填写内容
}

message ReceiptWriteColumn {
  string receiptColumnName = 1;                        // 对应老师格式单栏名称
  repeated string options = 2;                         // 学生选择的选项 / 填写内容 / 文件 URL
}

// ===============================
// 返回参数定义
// ===============================
message CreateReplyResp {
  int32 code = 1;                                      // 状态码
  string msg = 2;                                      // 提示信息
  string receipt_write_id = 3;                         // 填写记录 ID（唯一标识）
}



// ========================
// 修改收集表填写内容请求参数定义
// ========================
message ChangeReceiptReplyReq {
  string receipt_write_id = 1; // 学生曾经填写的收集表 ID
  string receipt_style_id =2 ; // 收集表格式 ID
  repeated ReceiptWriteColumn receipt_write_change = 3; // 修改后的填写内容
}

// =========================
// 修改收集表填写内容响应参数定义
// =========================
message ChangeReceiptReplyResp {
  int32 code = 1;    // 返回状态码
  string msg = 2;    // 提示信息，如"修改成功"
}





