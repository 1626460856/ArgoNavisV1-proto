syntax = "proto3";

package TeaNoticeCheck;

import "google/api/annotations.proto";

option go_package = "ArgoNavisV3/TeaNoticeCheck/api/teaNoticeCheck/v1;teaNoticeCheck";

// 教师端通知查看服务定义
service TeaCheck {
  // 获取单条通知详情
  rpc GetNoticeDetails (GetNoticeDetailsReq) returns (GetNoticeDetailsResp) {
    option (google.api.http) = {
      get: "/teacher/notice/details/{notice_id}"
    };
  }
  
  // 教师端搜索通知
  rpc TeacherSearchNotice (TeacherSearchNoticeReq) returns (TeacherSearchNoticeResp) {
    option (google.api.http) = {
      get: "/teacher/search/notice"
    };
  }
  
  // 查询已发布通知列表
  rpc GetPublishedNoticeList (GetPublishedNoticeListReq) returns (GetPublishedNoticeListResp) {
    option (google.api.http) = {
      get: "/teacher/search/notice/list"
    };
  }
}

// 获取单条通知详情的请求消息
message GetNoticeDetailsReq {
  int32 notice_id = 1;
}

// 包含单条通知详情的响应消息
message GetNoticeDetailsResp {
  int32 code = 1;
  string msg = 2;
  int32 notice_id = 3;
  string notice_title = 4;
  string notice_text = 5;
  string priority = 6;
  repeated GroupInfo group_list = 7;
  string deadline = 8;
  string receipt_style_id = 9;
  repeated ReceiptStyleColumn receipt_style = 10;
  repeated string reminder_time_list = 11;
  string overtime = 12;
  repeated StudentInfo unfinished_students = 13;
}

// 教师端搜索通知的请求消息
message TeacherSearchNoticeReq {
  string keyword = 1;
  string completion = 2;
}

// 包含教师端搜索结果的响应消息
message TeacherSearchNoticeResp {
  int32 code = 1;
  string msg = 2;
  repeated TeacherSearchNoticeItem notice_list = 3;
}

// 教师端搜索结果项
message TeacherSearchNoticeItem {
  int32 notice_id = 1;
  string notice_title = 2;
  string priority = 3;
  string deadline = 4;
  double completion = 5;
}

// 查询已发布通知列表的请求消息（空请求）
message GetPublishedNoticeListReq {
}

// 包含已发布通知列表的响应消息
message GetPublishedNoticeListResp {
  int32 code = 1;
  string msg = 2;
  repeated PublishedNoticeItem notice_list = 3;
}

// 已发布通知项
message PublishedNoticeItem {
  int32 notice_id = 1;
  string notice_title = 2;
  string priority = 3;
  string deadline = 4;
  double completion = 5;
}

// 群组信息
message GroupInfo {
  string group_name = 1;
  int32 group_id = 2;
}

// 学生信息
message StudentInfo {
  string name = 1;
  string student_id = 2;
}

// 收集表格式定义
message ReceiptStyleColumn {
  string receiptColumnName = 1;
  int32 SingleOption = 2;
  repeated string optionList = 3;
} 